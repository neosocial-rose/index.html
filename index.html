<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NeoSocial_Rose | AI ile Viral Ä°Ã§erik Ãœret | Ãœcretsiz Sosyal Medya BaÅŸlÄ±k Ãœretici</title>

  <!-- SEO Meta Tags -->
  <meta name="description" content="ðŸš€ Ãœcretsiz AI sosyal medya baÅŸlÄ±k ve hashtag Ã¼retici. YouTube, Instagram, TikTok ve X iÃ§in viral iÃ§erikler oluÅŸturun. Gemini AI teknolojisi ile profesyonel iÃ§erik Ã¼retimi.">
  <meta name="keywords" content="ai iÃ§erik Ã¼retici, sosyal medya baÅŸlÄ±k, hashtag Ã¼retici, youtube baÅŸlÄ±k, instagram hashtag, tiktok viral, twitter iÃ§erik, Ã¼cretsiz ai araÃ§, gemini ai, seo optimizasyon">
  <meta name="author" content="NeoSocial_Rose">
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <link rel="canonical" href="https://jarvisheyrose.com/">
   
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://jarvisheyrose.com/">
  <meta property="og:title" content="NeoSocial_Rose | AI Viral Content Generator">
  <meta property="og:description" content="Ãœcretsiz AI sosyal medya baÅŸlÄ±k ve hashtag Ã¼retici. YouTube, Instagram, TikTok ve X iÃ§in viral iÃ§erikler oluÅŸturun.">
  <meta property="og:image" content="https://jarvisheyrose.com/og-image.jpg">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://jarvisheyrose.com/">
  <meta property="twitter:title" content="NeoSocial_Rose | AI Viral Content Generator">
  <meta property="twitter:description" content="Ãœcretsiz AI sosyal medya baÅŸlÄ±k ve hashtag Ã¼retici. YouTube, Instagram, TikTok ve X iÃ§in viral iÃ§erikler oluÅŸturun.">
  <meta property="twitter:image" content="https://jarvisheyrose.com/og-image.jpg">

  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1842835786064419" crossorigin="anonymous"></script>

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');
    body { font-family: 'Plus Jakarta Sans', sans-serif; background:#fff; color:#0f172a; overflow-x:hidden; }
    .glass-nav { background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); border-bottom: 1px solid #f1f5f9; }
    .nav-link { font-size: 11px; font-weight: 800; text-transform: uppercase; color:#64748b; cursor:pointer; transition:0.2s; align-items:center; height:100%; user-select:none; }
    .nav-link:hover { color:#f43f5e; }
    .menu-dropdown { display:none; position:absolute; top:100%; left:50%; transform: translateX(-50%); background:#fff; border:1px solid #f1f5f9; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04); border-radius: 12px; padding: 16px; min-width: 240px; z-index: 5000; pointer-events:auto; }
    .lang-btn { font-size: 10px; font-weight: 800; padding: 6px 12px; border-radius: 8px; cursor:pointer; border:1px solid #e2e8f0; transition: all 0.2s; background:#fff; }
    .lang-btn.active { background:#f43f5e; color:#fff; border-color:#f43f5e; }
    .hero-box { border:2px dashed #e2e8f0; border-radius: 1.5rem; background:#f8fafc; overflow:hidden; display:flex; align-items:center; justify-content:center; }
    .hero-img { width:100%; height:100%; object-fit:cover; display:block; }
    #notification { display:none; position:fixed; bottom:20px; right:20px; z-index:9000; }
    .pro-input { background: #f8fafc; border: 2px solid #f1f5f9; border-radius: 1.5rem; padding: 1.5rem; width: 100%; font-weight: 700; color: #0f172a; outline: none; transition: 0.3s; }
    .pro-input:focus { border-color: #f43f5e; background: #fff; box-shadow: 0 10px 15px -3px rgba(244, 63, 94, 0.1); }
    .platform-card { border: 2px solid #f1f5f9; border-radius: 1.5rem; padding: 2rem; cursor: pointer; transition: all 0.3s; background: #fff; }
    .platform-card:hover { border-color:#f43f5e; transform: translateY(-4px); box-shadow: 0 20px 25px -5px rgba(244, 63, 94, 0.1); }
    .platform-card.disabled { opacity: 0.4; cursor: not-allowed; }
    .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.5); z-index:9999; align-items:center; justify-content:center; }
    .modal.active { display:flex; }
    .modal-content { background:#fff; border-radius: 2rem; padding: 3rem; max-width: 600px; width: 90%; max-height: 90vh; overflow-y: auto; }
    .seo-badge { display:inline-block; padding: 4px 12px; border-radius: 8px; font-size: 10px; font-weight: 800; text-transform: uppercase; }
    .seo-excellent { background:#dcfce7; color:#166534; }
    .seo-good { background:#dbeafe; color:#1e40af; }
    .seo-average { background:#fef3c7; color:#92400e; }
    .seo-poor { background:#fee2e2; color:#991b1b; }
    .page-content { display:none; }
    .page-content.active { display:block; }
  </style>
</head>

<body class="min-h-screen flex flex-col">
  <div id="notification" class="bg-slate-900 text-white px-6 py-3 rounded-xl shadow-2xl text-xs font-bold uppercase tracking-widest"></div>

  <nav class="fixed top-0 w-full z-50 glass-nav h-20">
    <div class="max-w-7xl mx-auto px-4 h-full flex items-center justify-between">
      <div class="flex items-center gap-10 h-full">
        <h1 class="text-xl font-black tracking-tighter cursor-pointer select-none" onclick="showPage('home')">
          NEOSOCIAL<span class="text-rose-500">_ROSE</span>
        </h1>
        <div class="hidden lg:flex items-center space-x-8 h-full">
          <span class="nav-link flex" onclick="showPage('home')" data-translate="nav_home">Anasayfa</span>
          
          <div class="relative h-full flex items-center group">
            <span class="nav-link flex" id="nav-apps-btn" data-translate="nav_apps">Uygulamalar</span>
            <div class="menu-dropdown group-hover:block" id="nav-apps-dd">
              <p class="text-[10px] font-black text-center mb-3 text-rose-500" data-translate="coming_soon">YAKINDA</p>
              <div class="flex justify-around items-center gap-4">
                <div class="text-center"><i class="fab fa-apple text-slate-800 text-3xl"></i><p class="text-[8px] font-bold mt-1">App Store</p></div>
                <div class="text-center"><i class="fab fa-google-play text-slate-800 text-3xl"></i><p class="text-[8px] font-bold mt-1">Google Play</p></div>
              </div>
            </div>
          </div>

          <div class="relative h-full flex items-center group">
            <span class="nav-link flex" id="nav-platform-btn" data-translate="nav_platform">Platform</span>
            <div class="menu-dropdown text-center group-hover:block" id="nav-platform-dd">
              <div class="bg-gradient-to-r from-rose-50 to-purple-50 p-3 rounded-lg">
                <p class="text-[10px] font-black text-slate-700 mb-1 uppercase">ðŸ¤– Power By</p>
                <p class="text-lg font-black text-transparent bg-clip-text bg-gradient-to-r from-rose-500 to-purple-600">GEMINI AI</p>
              </div>
            </div>
          </div>

          <span class="nav-link flex" onclick="showPage('about')" data-translate="nav_about">HakkÄ±mÄ±zda</span>
          <span class="nav-link flex" onclick="showPage('faq')" data-translate="nav_faq">SSS</span>
          <span class="nav-link flex" onclick="showPage('security')" data-translate="nav_security">GÃ¼venlik</span>
          <span class="nav-link flex" onclick="showPage('press')" data-translate="nav_press">BasÄ±n</span>
          <span class="nav-link flex" onclick="showPage('career')" data-translate="nav_career">Kariyer</span>
          <span class="nav-link flex" onclick="showPage('contact')" data-translate="nav_contact">Ä°letiÅŸim</span>
        </div>
      </div>

      <div class="flex items-center gap-3">
        <div class="flex gap-2">
          <button onclick="setLang('tr')" id="l-tr" class="lang-btn active">ðŸ‡¹ðŸ‡·</button>
          <button onclick="setLang('en')" id="l-en" class="lang-btn">ðŸ‡¬ðŸ‡§</button>
          <button onclick="setLang('fr')" id="l-fr" class="lang-btn">ðŸ‡«ðŸ‡·</button>
          <button onclick="setLang('de')" id="l-de" class="lang-btn">ðŸ‡©ðŸ‡ª</button>
          <button onclick="setLang('es')" id="l-es" class="lang-btn">ðŸ‡ªðŸ‡¸</button>
          <button onclick="setLang('pt')" id="l-pt" class="lang-btn">ðŸ‡µðŸ‡¹</button>
        </div>
        <button onclick="loginWithGoogle()" id="login-btn" class="bg-slate-900 text-white px-5 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-slate-800 transition shadow-lg">
          <span id="user-display" data-translate="login">GÄ°RÄ°Åž</span>
        </button>
        <button onclick="logoutGoogle()" id="logout-btn" class="hidden bg-white text-slate-900 px-5 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest border border-slate-200 hover:border-rose-500 hover:text-rose-500 transition shadow-lg">
          <span data-translate="logout">Ã‡IKIÅž</span>
        </button>
      </div>
    </div>
  </nav>

  <main class="flex-grow max-w-7xl mx-auto w-full px-4 pt-32 pb-20">
    <!-- HOME PAGE -->
    <div id="page-home" class="page-content active">
      <section class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-14 h-80">
        <div class="hero-box"><img class="hero-img" src="hero.jpeg" alt="Hero 1" onerror="this.parentElement.innerHTML='<span class=\'text-[10px] font-black text-slate-300 uppercase\'>GÃ¶rsel 1</span>';"></div>
        <div class="ad-box flex flex-col items-center justify-center p-8 text-center bg-slate-50 rounded-[1.5rem] border border-slate-100">
          <span class="text-[9px] font-black text-amber-500 uppercase tracking-widest mb-4">Google AdSense</span>
          <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1842835786064419" data-ad-slot="1234567890" data-ad-format="auto" data-full-width-responsive="true"></ins>
        </div>
        <div class="hero-box"><img class="hero-img" src="hero1.jpeg" alt="Hero 2" onerror="this.parentElement.innerHTML='<span class=\'text-[10px] font-black text-slate-300 uppercase\'>GÃ¶rsel 2</span>';"></div>
      </section>

      <section class="mb-14">
        <h2 class="text-2xl font-black text-center mb-8 uppercase tracking-wider" data-translate="select_platform">Platform SeÃ§in</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
          <div class="platform-card" id="card-youtube" onclick="openGenerator('youtube')">
            <div class="flex items-center justify-between mb-4"><i class="fab fa-youtube text-red-600 text-4xl"></i><span id="badge-youtube" class="bg-rose-50 text-rose-500 px-3 py-1 rounded-full text-[9px] font-black">2/2</span></div>
            <h3 class="text-lg font-black mb-2">YouTube</h3>
            <p class="text-xs text-slate-500 font-bold" data-translate="platform_youtube_desc">Video baÅŸlÄ±klarÄ± ve hashtag'ler</p>
          </div>
          <div class="platform-card" id="card-instagram" onclick="openGenerator('instagram')">
            <div class="flex items-center justify-between mb-4"><i class="fab fa-instagram text-pink-600 text-4xl"></i><span id="badge-instagram" class="bg-rose-50 text-rose-500 px-3 py-1 rounded-full text-[9px] font-black">2/2</span></div>
            <h3 class="text-lg font-black mb-2">Instagram</h3>
            <p class="text-xs text-slate-500 font-bold" data-translate="platform_instagram_desc">GÃ¶nderi baÅŸlÄ±klarÄ± ve hashtag'ler</p>
          </div>
          <div class="platform-card" id="card-tiktok" onclick="openGenerator('tiktok')">
            <div class="flex items-center justify-between mb-4"><i class="fab fa-tiktok text-slate-900 text-4xl"></i><span id="badge-tiktok" class="bg-rose-50 text-rose-500 px-3 py-1 rounded-full text-[9px] font-black">2/2</span></div>
            <h3 class="text-lg font-black mb-2">TikTok</h3>
            <p class="text-xs text-slate-500 font-bold" data-translate="platform_tiktok_desc">Video baÅŸlÄ±klarÄ± ve trend hashtag'ler</p>
          </div>
          <div class="platform-card" id="card-x" onclick="openGenerator('x')">
            <div class="flex items-center justify-between mb-4"><i class="fab fa-twitter text-blue-400 text-4xl"></i><span id="badge-x" class="bg-rose-50 text-rose-500 px-3 py-1 rounded-full text-[9px] font-black">2/2</span></div>
            <h3 class="text-lg font-black mb-2">X (Twitter)</h3>
            <p class="text-xs text-slate-500 font-bold" data-translate="platform_x_desc">Tweet baÅŸlÄ±klarÄ± ve hashtag'ler</p>
          </div>
        </div>
      </section>
    </div>

    <!-- Generator Modal -->
    <div id="generator-modal" class="modal">
      <div class="modal-content">
        <div class="flex justify-between items-center mb-8">
          <div>
            <h2 id="modal-platform-title" class="text-2xl font-black uppercase"></h2>
            <p class="text-xs text-slate-500 font-bold mt-1" data-translate="modal_subtitle">Viral iÃ§erik Ã¼retin</p>
          </div>
          <button onclick="closeGenerator()" class="text-slate-400 hover:text-rose-500 text-2xl"><i class="fas fa-times"></i></button>
        </div>
        <div class="space-y-6">
          <div class="flex justify-between items-center"><span class="text-xs font-black uppercase text-slate-400" data-translate="remaining_rights">Kalan Hak</span><span id="modal-credit-badge" class="bg-rose-50 text-rose-500 px-4 py-1.5 rounded-full text-[10px] font-black">2/2</span></div>
          <div>
            <label class="block text-xs font-black uppercase text-slate-400 mb-3" data-translate="topic_label">Ä°Ã§erik Konusu</label>
            <input type="text" id="modal-topic-input" class="pro-input" data-translate-placeholder="topic_placeholder" placeholder="Ã–rn: Futbol taktikleri">
          </div>
          <button onclick="handleGeneration()" id="modal-gen-btn" class="w-full bg-slate-900 text-white py-6 rounded-2xl font-black uppercase tracking-widest hover:bg-rose-500 transition shadow-xl active:scale-[0.98]">
            <span data-translate="generate_btn">ÃœRETÄ°MÄ° BAÅžLAT</span>
          </button>
          <div id="modal-result-box" class="hidden space-y-4">
            <div class="flex items-center justify-between"><span class="text-xs font-black uppercase text-slate-400" data-translate="seo_score">SEO Skoru</span><span id="seo-score-badge" class="seo-badge seo-excellent">85/100</span></div>
            <div class="bg-slate-50 border-2 border-slate-100 rounded-[2rem] p-6 relative group">
              <p id="modal-result-text" class="text-base font-bold text-slate-800 leading-relaxed whitespace-pre-wrap"></p>
              <button onclick="copyModalContent()" class="absolute top-6 right-6 text-slate-400 hover:text-rose-500 transition text-xl"><i class="far fa-copy"></i></button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>

  <script>
    const apiKey = ""; 
    const translations = {
      tr: {nav_home:"Anasayfa",nav_apps:"Uygulamalar",nav_platform:"Platform",nav_about:"HakkÄ±mÄ±zda",nav_faq:"SSS",nav_security:"GÃ¼venlik",nav_press:"BasÄ±n",nav_career:"Kariyer",nav_contact:"Ä°letiÅŸim",login:"GÄ°RÄ°Åž",logout:"Ã‡IKIÅž",coming_soon:"YAKINDA",select_platform:"Platform SeÃ§in",platform_youtube_desc:"Video baÅŸlÄ±klarÄ± ve hashtag'ler",modal_subtitle:"Viral iÃ§erik Ã¼retin",remaining_rights:"Kalan Hak",topic_label:"Ä°Ã§erik Konusu",topic_placeholder:"Ã–rn: Futbol",generate_btn:"ÃœRETÄ°MÄ° BAÅžLAT",seo_score:"SEO Skoru",notify_limit:"Hak doldu!",notify_topic:"Konu giriniz.",notify_success:"Ãœretildi âœ¨",notify_error:"Hata!",notify_copied:"KopyalandÄ± âœ¨",notify_login_required:"LÃ¼tfen giriÅŸ yapÄ±n."},
      en: {nav_home:"Home",nav_apps:"Apps",nav_platform:"Platform",nav_about:"About Us",nav_faq:"FAQ",nav_security:"Security",nav_press:"Press",nav_career:"Career",nav_contact:"Contact",login:"LOGIN",logout:"LOGOUT",coming_soon:"COMING SOON",select_platform:"Select Platform",platform_youtube_desc:"Titles & hashtags",modal_subtitle:"Viral content",remaining_rights:"Rights",topic_label:"Topic",topic_placeholder:"E.g. Football",generate_btn:"GENERATE",seo_score:"SEO Score",notify_limit:"No rights!",notify_topic:"Enter topic.",notify_success:"Generated âœ¨",notify_error:"Error!",notify_copied:"Copied âœ¨",notify_login_required:"Login required."}
    };

    const state = { lang: 'tr', currentPlatform: 'youtube', userId: null, credits: { youtube: 0, instagram: 0, tiktok: 0, x: 0 } };

    const firebaseConfig = { apiKey: "AIzaSyDuRsR3gmen12f_I2EBbf0xND0dVWQGH_I", authDomain: "neosocial-rose.firebaseapp.com", projectId: "neosocial-rose", storageBucket: "neosocial-rose.firebasestorage.app", messagingSenderId: "909069196756", appId: "1:909069196756:web:db488838badee276f0ca41" };
    firebase.initializeApp(firebaseConfig);

    firebase.auth().onAuthStateChanged(u => {
      if (u) {
        state.userId = u.uid;
        document.getElementById('user-display').innerText = u.displayName ? u.displayName.split(' ')[0].toUpperCase() : 'USER';
        document.getElementById('login-btn').classList.add('hidden');
        document.getElementById('logout-btn').classList.remove('hidden');
        loadCredits(); // KullanÄ±cÄ± giriÅŸ yapÄ±nca kredileri yÃ¼kle
      } else {
        state.userId = null;
        state.credits = { youtube: 0, instagram: 0, tiktok: 0, x: 0 };
        document.getElementById('login-btn').classList.remove('hidden');
        document.getElementById('logout-btn').classList.add('hidden');
        updateBadges(); // ArayÃ¼zÃ¼ temizle
      }
    });

    function notify(m) { const e = document.getElementById('notification'); e.innerText = m; e.style.display = 'block'; setTimeout(() => e.style.display = 'none', 3000); }
    function setLang(l) { state.lang = l; document.querySelectorAll('.lang-btn').forEach(b => b.classList.toggle('active', b.id === `l-${l}`)); translatePage(); }
    function translate(k) { return translations[state.lang][k] || translations['en'][k] || k; }
    function translatePage() { document.querySelectorAll('[data-translate]').forEach(e => e.innerHTML = translate(e.getAttribute('data-translate'))); document.querySelectorAll('[data-translate-placeholder]').forEach(e => e.placeholder = translate(e.getAttribute('data-translate-placeholder'))); }
    function loginWithGoogle() { firebase.auth().signInWithPopup(new firebase.auth.GoogleAuthProvider()); }
    function logoutGoogle() { firebase.auth().signOut(); }

    /**
     * HaklarÄ± (Kredileri) YÃ¼kleme ve Tarih KontrolÃ¼
     * Bir kez bittiÄŸinde o gÃ¼n iÃ§in geri verilmez.
     */
    function loadCredits() {
      if (!state.userId) return;
      const today = new Date().toDateString();
      const storageKey = `nsr_perm_data_${state.userId}`;
      const saved = localStorage.getItem(storageKey);
      
      if (saved) {
        const parsed = JSON.parse(saved);
        if (parsed.date === today) {
          // EÄŸer bugÃ¼n zaten kullanÄ±m varsa, saklanan haklarÄ± yÃ¼kle
          state.credits = parsed.credits;
        } else {
          // Yeni bir gÃ¼n: HaklarÄ± tazele ve kaydet
          state.credits = { youtube: 2, instagram: 2, tiktok: 2, x: 2 };
          saveCredits();
        }
      } else {
        // Ä°lk kez kullanan/giriÅŸ yapan kiÅŸi: BaÅŸlangÄ±Ã§ haklarÄ±nÄ± ver
        state.credits = { youtube: 2, instagram: 2, tiktok: 2, x: 2 };
        saveCredits();
      }
      updateBadges();
    }

    /**
     * HaklarÄ± (Kredileri) Kaydetme
     */
    function saveCredits() {
      if (!state.userId) return;
      const today = new Date().toDateString();
      const storageKey = `nsr_perm_data_${state.userId}`;
      const dataToSave = {
        date: today,
        credits: state.credits
      };
      localStorage.setItem(storageKey, JSON.stringify(dataToSave));
      updateBadges();
    }

    function updateBadges() {
      Object.keys(state.credits).forEach(p => {
        const b = document.getElementById(`badge-${p}`);
        if (b) b.innerText = `${state.credits[p]}/2`;
        const c = document.getElementById(`card-${p}`);
        if (c) c.classList.toggle('disabled', state.credits[p] <= 0);
      });
    }

    function openGenerator(p) {
      if (!state.userId) return notify(translate('notify_login_required'));
      if (state.credits[p] <= 0) return notify(translate('notify_limit'));
      state.currentPlatform = p;
      document.getElementById('modal-platform-title').innerText = p.toUpperCase();
      document.getElementById('modal-credit-badge').innerText = `${state.credits[p]}/2`;
      document.getElementById('modal-result-box').classList.add('hidden');
      document.getElementById('generator-modal').classList.add('active');
    }

    function closeGenerator() { document.getElementById('generator-modal').classList.remove('active'); }

    function calculateSEO(t) {
      let s = 65;
      if (t.length > 50) s += 10;
      if (t.includes('#')) s += 10;
      if (/[A-Z]/.test(t)) s += 5;
      if (t.length > 200) s += 10;
      return Math.min(s, 100);
    }

    function getSEOClass(s) {
      if (s >= 85) return 'seo-excellent';
      if (s >= 70) return 'seo-good';
      if (s >= 50) return 'seo-average';
      return 'seo-poor';
    }

    async function handleGeneration() {
      const topicInput = document.getElementById('modal-topic-input');
      const topic = topicInput.value.trim();
      if (!topic) return notify(translate('notify_topic'));
      
      const btn = document.getElementById('modal-gen-btn');
      btn.disabled = true; btn.innerText = '...';
      
      try {
        const sysPrompt = `Sen profesyonel bir sosyal medya yÃ¶neticisisin. Viral baÅŸlÄ±klar ve hashtagler Ã¼ret. Dil: ${state.lang}.`;
        const prompt = `Platform: ${state.currentPlatform.toUpperCase()}, Konu: ${topic}.`;
        
        const res = await callGemini(prompt, sysPrompt);
        if (res) {
          // Hak dÃ¼ÅŸÃ¼rme iÅŸlemi ve KALICI kayÄ±t
          state.credits[state.currentPlatform]--;
          saveCredits(); 
          
          document.getElementById('modal-result-text').innerText = res;
          const score = calculateSEO(res);
          const sb = document.getElementById('seo-score-badge');
          sb.innerText = `${score}/100`;
          sb.className = `seo-badge ${getSEOClass(score)}`;
          
          document.getElementById('modal-result-box').classList.remove('hidden');
          document.getElementById('modal-credit-badge').innerText = `${state.credits[state.currentPlatform]}/2`;
          notify(translate('notify_success'));
        }
      } catch (err) { notify(translate('notify_error')); }
      finally { btn.disabled = false; btn.innerText = translate('generate_btn'); }
    }

    async function callGemini(p, s, r=5) {
      const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
      const payload = {
        contents: [{ parts: [{ text: p }] }],
        systemInstruction: { parts: [{ text: s }] },
        tools: [{ "google_search": {} }]
      };

      for (let i=0; i<r; i++) {
        try {
          const res = await fetch(url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
          const data = await res.json();
          const text = data.candidates?.[0]?.content?.parts?.[0]?.text;
          if (text) return text;
          throw new Error('API Response Empty');
        } catch (e) { 
          if (i === r-1) throw e; 
          await new Promise(v => setTimeout(v, Math.pow(2, i) * 1000)); 
        }
      }
    }

    function copyModalContent() {
      const t = document.getElementById('modal-result-text').innerText;
      const el = document.createElement('textarea'); el.value = t; document.body.appendChild(el); el.select();
      document.execCommand('copy'); document.body.removeChild(el); notify(translate('notify_copied'));
    }

    function showPage(p) {
      document.querySelectorAll('.page-content').forEach(pg => pg.classList.remove('active'));
      const t = document.getElementById(`page-${p}`);
      if(t) t.classList.add('active');
      window.scrollTo(0,0);
    }
  </script>
</body>
</html>
