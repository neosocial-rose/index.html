<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ücretsiz AI Hashtag & Başlık Üretici 2026: YouTube, Instagram, TikTok | NeoSocial_Rose</title>
  <meta name="description" content="Gemini AI destekli ücretsiz sosyal medya başlık ve hashtag üretici. YouTube, Instagram, TikTok ve X için viral içerik başlıkları 2 saniyede üretin. Her platform için günlük 2 üretim hakkı.">
  <meta name="keywords" content="AI hashtag generator, YouTube başlık, Instagram hashtag, TikTok viral, ücretsiz araç, sosyal medya optimizasyon">

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');

    body { font-family: 'Plus Jakarta Sans', sans-serif; background:#fff; color:#0f172a; overflow-x:hidden; }
    .glass-nav { background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); border-bottom: 1px solid #f1f5f9; }
    .nav-link { font-size: 11px; font-weight: 800; text-transform: uppercase; color:#64748b; cursor:pointer; transition:0.2s; display:flex; align-items:center; height:100%; user-select:none; }
    .nav-link:hover { color:#f43f5e; }

    .menu-dropdown {
      display:none;
      position:absolute;
      top:100%;
      left:50%;
      transform: translateX(-50%);
      background:#fff;
      border:1px solid #f1f5f9;
      box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04);
      border-radius: 12px;
      padding: 16px;
      min-width: 240px;
      z-index: 5000;
      pointer-events:auto;
    }

    body.dropdown-open #page-header { visibility: hidden; }

    .lang-btn { font-size: 10px; font-weight: 800; padding: 6px 12px; border-radius: 8px; cursor:pointer; border:1px solid #e2e8f0; transition: all 0.2s; background:#fff; }
    .lang-btn.active { background:#f43f5e; color:#fff; border-color:#f43f5e; }

    .hero-box { border:2px dashed #e2e8f0; border-radius: 1.5rem; background:#f8fafc; overflow:hidden; display:flex; align-items:center; justify-content:center; }
    .hero-img { width:100%; height:100%; object-fit:cover; display:block; }

    .ad-box { background:#fffbeb; border:1px solid #fef3c7; border-radius: 1.5rem; }
    .hidden-section { display:none; }

    #notification { display:none; position:fixed; bottom:20px; right:20px; z-index:9000; }
    .modal-overlay { background: rgba(0,0,0,0.6); backdrop-filter: blur(4px); }
  </style>
</head>

<body class="min-h-screen flex flex-col">

  <div id="notification" class="bg-slate-900 text-white px-6 py-3 rounded-xl shadow-2xl text-xs font-bold uppercase tracking-widest"></div>

  <nav class="fixed top-0 w-full z-50 glass-nav h-20">
    <div class="max-w-7xl mx-auto px-4 h-full flex items-center justify-between">
      <div class="flex items-center gap-10 h-full">
        <h1 class="text-xl font-black tracking-tighter cursor-pointer select-none" onclick="showView('home')">
          NEOSOCIAL<span class="text-rose-500">_ROSE</span>
        </h1>

        <div class="hidden lg:flex items-center space-x-8 h-full">
          <span onclick="showView('home')" class="nav-link">Anasayfa</span>
          <div class="relative h-full flex items-center">
            <span class="nav-link" id="nav-apps-btn">Uygulamalar</span>
            <div class="menu-dropdown" id="nav-apps-dd">
              <div class="flex justify-around items-center">
                <i class="fab fa-youtube text-red-600 text-2xl"></i>
                <i class="fab fa-instagram text-pink-600 text-2xl"></i>
                <i class="fab fa-tiktok text-black text-2xl"></i>
                <i class="fab fa-twitter text-blue-400 text-2xl"></i>
              </div>
              <div class="mt-3 text-[10px] font-black text-slate-400 text-center uppercase tracking-widest">iOS & Google Play – Yakında</div>
            </div>
          </div>

          <div class="relative h-full flex items-center">
            <span class="nav-link" id="nav-platform-btn">Platform</span>
            <div class="menu-dropdown text-center" id="nav-platform-dd">
              <span class="text-[11px] font-black text-slate-500 uppercase tracking-widest italic">Gemini kullanılıyor</span>
            </div>
          </div>

          <div class="relative h-full flex items-center">
            <span class="nav-link" id="nav-production-btn">Üretim Yeri</span>
            <div class="menu-dropdown grid grid-cols-1 gap-1" id="nav-production-dd">
              <button onclick="setMode('youtube','üretim')" class="text-[10px] font-black uppercase text-left py-2 px-3 rounded-md hover:bg-rose-50 hover:text-rose-500 transition">YouTube</button>
              <button onclick="setMode('instagram','üretim')" class="text-[10px] font-black uppercase text-left py-2 px-3 rounded-md hover:bg-rose-50 hover:text-rose-500 transition">Instagram</button>
              <button onclick="setMode('tiktok','üretim')" class="text-[10px] font-black uppercase text-left py-2 px-3 rounded-md hover:bg-rose-50 hover:text-rose-500 transition">TikTok</button>
              <button onclick="setMode('x','üretim')" class="text-[10px] font-black uppercase text-left py-2 px-3 rounded-md hover:bg-rose-50 hover:text-rose-500 transition">X</button>
              <button onclick="setMode('kanal','analiz')" class="text-[10px] font-black uppercase text-left py-2 px-3 rounded-md bg-slate-900 text-white mt-2">Kanal Analizi</button>
            </div>
          </div>
        </div>
      </div>

      <div class="flex items-center gap-3">
        <button onclick="loginWithGoogle()" id="login-btn" class="flex items-center gap-2 bg-white border border-slate-200 px-5 py-2.5 rounded-xl hover:shadow-lg transition transform active:scale-95">
          <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" class="w-4 h-4" alt="Google">
          <span id="user-name-display" class="text-[10px] font-black uppercase text-slate-700">Google ile Giriş</span>
        </button>

        <button onclick="logoutFromGoogle()" id="logout-btn" class="hidden items-center justify-center bg-rose-50 text-rose-500 border border-rose-100 px-4 py-2.5 rounded-xl hover:bg-rose-500 hover:text-white transition transform active:scale-95">
          <i class="fas fa-sign-out-alt text-xs"></i>
        </button>
      </div>

    </div>
  </nav>

  <header id="page-header" class="pt-28 pb-10 px-4 bg-slate-50 border-b border-slate-100">
    <div class="max-w-7xl mx-auto">
      <div class="flex flex-wrap gap-3 mb-8">
        <button onclick="setLang('tr')" id="l-tr" class="lang-btn active">Türkçe</button>
        <button onclick="setLang('en')" id="l-en" class="lang-btn">English</button>
        <button onclick="setLang('fr')" id="l-fr" class="lang-btn">Français</button>
        <button onclick="setLang('de')" id="l-de" class="lang-btn">Deutsch</button>
        <button onclick="setLang('es')" id="l-es" class="lang-btn">Español</button>
        <button onclick="setLang('pt')" id="l-pt" class="lang-btn">Português</button>
      </div>
      <p id="desc-text" class="text-slate-500 text-sm font-semibold max-w-3xl leading-relaxed opacity-80"></p>
    </div>
  </header>

  <main class="flex-grow max-w-7xl mx-auto w-full px-4 py-14">
    <div id="view-home">
      <section class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-14 h-80">
        <!-- FIXED ONERROR HANDLER -->
        <div class="hero-box"><img class="hero-img" src="hero.jpeg" onerror="this.parentElement.innerHTML='<span class=\'text-[10px] font-black text-slate-300 uppercase tracking-[0.35em]\'>HERO</span>';"></div>
        <div class="ad-box flex flex-col items-center justify-center p-8 text-center shadow-inner">
          <span class="text-[9px] font-black text-amber-500 uppercase tracking-widest mb-6 bg-amber-50 px-3 py-1 rounded">Google Sponsorlu Alan</span>
          <div class="w-full h-full border-2 border-amber-100 border-dashed rounded-xl flex items-center justify-center italic text-amber-300 text-xs font-bold">REKLAM GÖSTERİMİ</div>
        </div>
        <!-- FIXED ONERROR HANDLER -->
        <div class="hero-box"><img class="hero-img" src="hero1.jpeg" onerror="this.parentElement.innerHTML='<span class=\'text-[10px] font-black text-slate-300 uppercase tracking-[0.35em]\'>HERO1</span>';"></div>
      </section>

      <section id="generator" class="max-w-2xl mx-auto bg-white border border-slate-200 rounded-[3rem] p-10 shadow-2xl mb-14">
        <div class="flex items-center justify-between mb-10 border-b border-slate-50 pb-6">
          <h3 id="current-mode-title" class="text-sm font-black uppercase text-slate-800 tracking-tighter">YOUTUBE ÜRETİMİ</h3>
          <div class="text-[10px] font-black text-rose-500 bg-rose-50 px-4 py-1.5 rounded-full" id="credit-count">HAK: 2 / 2</div>
        </div>
        <div class="space-y-8">
          <div>
            <label id="input-label" class="text-[10px] font-black uppercase text-slate-400 mb-3 block tracking-widest">İçerik Konusu Giriniz</label>
            <input type="text" id="topicInput" class="w-full border-2 border-slate-100 p-5 rounded-2xl outline-none focus:border-rose-500 font-bold text-slate-900 transition-all placeholder:text-slate-300" placeholder="Örn: Evde spor yapmanın avantajları">
          </div>
          <button onclick="generateDemo()" id="genBtn" class="w-full bg-slate-900 text-white py-5 rounded-2xl font-black uppercase tracking-[0.2em] hover:bg-slate-800 transition transform active:scale-[0.98] shadow-2xl shadow-slate-300">ÜRETİMİ BAŞLAT</button>
          <div id="result-box" class="hidden">
            <div class="p-6 bg-slate-50 border-2 border-slate-100 rounded-2xl relative">
              <p id="result-text" class="text-base font-bold text-slate-800 font-mono break-words pr-10"></p>
              <button onclick="copyResult()" class="absolute top-6 right-6 text-slate-400 hover:text-rose-500 transition scale-125"><i class="far fa-copy"></i></button>
              <div id="validation-msg" class="mt-4 text-[10px] font-black uppercase"></div>
            </div>
          </div>

          <!-- BONUS GEÇİCİ KAPALI -->
          <div class="text-center" style="display:none;">
            <span onclick="openAdModal()" class="text-[10px] font-black text-slate-400 uppercase cursor-pointer hover:text-rose-500 transition border-b border-slate-200 pb-1">Limit bitti mi? Reklam izleyerek +1 üretim kazan</span>
          </div>
        </div>
      </section>
      
      <section class="mb-14">
        <!-- FIXED ONERROR HANDLER -->
        <div class="hero-box w-full h-80"><img class="hero-img" src="hero2.jpeg" onerror="this.parentElement.innerHTML='<span class=\'text-[10px] font-black text-slate-300 uppercase tracking-[0.35em]\'>HERO2</span>';"></div>
      </section>
    </div>

    <div id="view-apps" class="hidden-section mb-20 text-center py-20 bg-slate-50 rounded-[3rem] border border-slate-100">
      <h2 class="text-xs font-black uppercase text-slate-400 mb-12 tracking-[0.4em]">Desteklenen Platformlar</h2>
      <div class="flex flex-wrap justify-center items-center gap-16">
        <div class="flex flex-col items-center gap-4"><i class="fab fa-youtube text-red-600 text-7xl"></i><span class="text-[10px] font-black">YOUTUBE</span></div>
        <div class="flex flex-col items-center gap-4"><i class="fab fa-instagram text-pink-600 text-7xl"></i><span class="text-[10px] font-black">INSTAGRAM</span></div>
        <div class="flex flex-col items-center gap-4"><i class="fab fa-tiktok text-black text-7xl"></i><span class="text-[10px] font-black">TIKTOK</span></div>
        <div class="flex flex-col items-center gap-4"><i class="fab fa-twitter text-blue-400 text-7xl"></i><span class="text-[10px] font-black">X</span></div>
      </div>
    </div>

    <div id="view-platform" class="hidden-section mb-20 text-center py-32 bg-slate-900 rounded-[3rem] text-white">
      <i class="fas fa-brain text-rose-500 text-5xl mb-6"></i>
      <h2 class="text-3xl font-black uppercase tracking-tighter">Gemini AI kullanılıyor</h2>
      <p class="text-slate-400 text-xs mt-4 font-bold uppercase tracking-widest">Politika uyumlu içerik üretimi</p>
    </div>
  </main>

  <footer class="bg-slate-900 text-slate-500 py-20 px-4 mt-auto">
    <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-16 text-[10px] font-black uppercase">
      <div class="col-span-1 md:col-span-2">
        <h4 class="text-white text-xl mb-6 tracking-tighter">NEOSOCIAL<span class="text-rose-500">_ROSE</span></h4>
        <p class="normal-case font-bold opacity-50 leading-relaxed max-w-sm mb-8 text-xs">Yüksek erişim odaklı içerik rehberiniz. Burası sohbet yeri değil, stratejik izlenme artırma platformudur.</p>
        <p class="opacity-30">© 2026 NeoSocial_Rose</p>
      </div>
      <div class="space-y-5">
        <span class="text-slate-200 block text-xs tracking-widest">KURUMSAL</span>
        <button onclick="openInfoModal('about')" class="block hover:text-white transition opacity-70 uppercase text-left">Hakkımızda</button>
        <button onclick="openInfoModal('press')" class="block hover:text-white transition opacity-70 uppercase text-left">Basın (Yakında)</button>
        <button onclick="openInfoModal('career')" class="block hover:text-white transition opacity-70 uppercase text-left">Kariyer (Yakında)</button>
        <button onclick="openInfoModal('faq')" class="block hover:text-white transition opacity-70 uppercase text-left">SSS</button>
      </div>
      <div class="space-y-5">
        <span class="text-slate-200 block text-xs tracking-widest">DESTEK</span>
        <a href="mailto:jarvisheyrose@gmail.com" class="block hover:text-white transition opacity-70 lowercase">jarvisheyrose@gmail.com</a>
        <button onclick="openInfoModal('privacy')" class="block hover:text-white transition opacity-70 uppercase text-left">KVKK / GİZLİLİK</button>
        <button onclick="openInfoModal('terms')" class="block hover:text-white transition opacity-70 uppercase text-left">KULLANIM ŞARTLARI</button>
        <button onclick="openInfoModal('community')" class="block hover:text-white transition opacity-70 uppercase text-left">TOPLULUK KURALLARI</button>
      </div>
    </div>
  </footer>

  <div id="ad-modal" class="fixed inset-0 z-[8000] modal-overlay hidden items-center justify-center p-4">
    <div class="bg-white border border-slate-200 p-10 rounded-[2.5rem] max-w-sm w-full text-center">
      <h3 class="text-xl font-black text-slate-900 mb-3 uppercase">EK ÜRETİM HAKKI</h3>
      <button onclick="simulateAd()" id="ad-start-btn" class="w-full bg-slate-900 text-white py-4 rounded-2xl font-black uppercase tracking-widest hover:bg-rose-500 transition shadow-xl">Reklamı Başlat</button>
      <button onclick="closeAdModal()" class="mt-6 text-[10px] font-black text-slate-400 uppercase">İptal</button>
    </div>
  </div>

  <div id="info-modal" class="fixed inset-0 z-[8500] modal-overlay hidden items-center justify-center p-4">
    <div class="bg-white border border-slate-200 p-8 rounded-[2rem] max-w-2xl w-full relative shadow-2xl">
      <button onclick="closeInfoModal()" class="absolute top-6 right-6 text-slate-400 hover:text-rose-500 transition scale-150"><i class="fas fa-times"></i></button>
      <h3 id="info-modal-title" class="text-2xl font-black text-slate-900 mb-6 uppercase tracking-tighter"></h3>
      <div id="info-modal-body" class="text-slate-600 text-sm font-semibold leading-relaxed space-y-4 max-h-[60vh] overflow-y-auto"></div>
    </div>
  </div>

  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDuRsR3gmen12f_I2EBbf0xND0dVWQGH_I",
      authDomain: "neosocial-rose.firebaseapp.com",
      projectId: "neosocial-rose",
      storageBucket: "neosocial-rose.firebasestorage.app",
      messagingSenderId: "909069196756",
      appId: "1:909069196756:web:db488838badee276f0ca41"
    };
    firebase.initializeApp(firebaseConfig);

    function loginWithGoogle() {
      const provider = new firebase.auth.GoogleAuthProvider();
      firebase.auth().signInWithPopup(provider).catch((error) => { alert("Giriş Hatası: " + error.message); });
    }

    function logoutFromGoogle() {
      firebase.auth().signOut().then(() => { notify("Çıkış yapıldı."); });
    }

    firebase.auth().onAuthStateChanged((user) => {
      const logoutBtn = document.getElementById("logout-btn");
      const userDisplay = document.getElementById("user-name-display");
      if (user) {
        userDisplay.innerText = user.displayName.toUpperCase();
        logoutBtn.classList.remove("hidden");
        logoutBtn.classList.add("flex");
      } else {
        userDisplay.innerText = "Google ile Giriş";
        logoutBtn.classList.add("hidden");
        logoutBtn.classList.remove("flex");
      }
    });

    const FALLBACK_I18N = {
      tr: "Popüler platformlar için başlık ve hashtag önerileri alın. Dürüstlük ilkemiz gereği belirtmeliyiz: Bu araç size yol gösterir ancak algoritmalar sebebiyle kesin başarı veya virallik garantisi sunmaz. Sistem verilere dayalı en iyi önerileri sunsa da %100 sonuç vaat etmez. Lütfen mucize bekleyerek hayale kapılmayın; bu aracı stratejinizi güçlendirmek için kullanın.",
      en: "Get title and hashtag suggestions for popular platforms. As a matter of honesty, we must state: This tool guides you but does not guarantee definite success or virality due to algorithms. Although the system offers the best data-driven suggestions, it does not promise 100% results. Please do not expect miracles; use this tool to strengthen your strategy.",
      fr: "Obtenez des suggestions de titres et de hashtags pour les plateformes populaires. Par honnêteté, nous devons préciser : cet outil vous guide mais ne garantit pas un succès définitif ou la viralité en raison des algorithmes. Bien que le système offre les meilleures suggestions basées sur des données, il ne promet pas de résultats à 100 %. S'il vous plaît, n'attendez pas de miracle ; utilisez cet outil pour renforcer votre stratégie.",
      de: "Erhalten Sie Titel- und Hashtag-Vorschläge für beliebte Plattformen. Aus Ehrlichkeit müssen wir darauf hinweisen: Dieses Tool leitet Sie an, garantiert jedoch aufgrund von Algorithmen keinen sicheren Erfolg oder Viralität. Auch wenn das System die besten datenbasierten Vorschläge liefert, verspricht es keine 100%igen Ergebnisse. Bitte erwarten Sie keine Wunder; nutzen Sie dieses Tool, um Ihre Strategie zu stärken.",
      es: "Obtenga sugerencias de títulos y hashtags para plataformas populares. Por honestidad, debemos indicar: Esta herramienta le guía, pero no garantiza el éxito definitivo o la viralidad debido a los algoritmos. Aunque el sistema ofrece las mejores sugerencias basadas en datos, no promete resultados del 100%. Por favor, no espere milagros; utilice esta herramienta para fortalecer su estrategia.",
      pt: "Obtenha sugestões de títulos e hashtags para plataformas populares. Por honestidade, devemos declarar: Esta ferramenta guia você, mas não garante sucesso definitivo ou viralidade devido aos algoritmos. Embora o sistema ofereça as melhores sugestões baseadas em dados, não promete resultados de 100%. Por favor, não espere milagres; use esta ferramenta para fortalecer sua estratégia."
    };

    const INFO_CONTENT = {
      about: { title: "Hakkımızda", body: "NeoSocial_Rose, içerik üreticilerinin dijital dünyadaki görünürlüğünü stratejik verilere dayanarak artırmayı hedefler. Platformumuz bir sohbet yeri değil, tamamen izlenme optimizasyon merkezidir." },
      faq: { title: "Sıkça Sorulan Sorular", body: "<b>Nasıl çalışır?</b> Gemini AI ile trend analizi yapılır.<br><b>Haklar?</b> Günlük 2 üretim hakkı verilir, reklamla artırılabilir." },
      privacy: { title: "KVKK / Gizlilik", body: "NeoSocial_Rose üzerinde hiçbir veri toplama veya kayıt yapılmamaktadır. Girdiğiniz bilgiler sunucularımızda saklanmaz." },
      terms: { title: "Kullanim Şartları", body: "Üretilen içeriklerin kullanım sorumluluğu kullanıcıya aittir. Sosyal medya politikalarına uyum önerilir." },
      community: { title: "Topluluk Kuralları", body: "Etik dışı, yanıltıcı veya manipülatif içerik üretimi desteklenmez." },
      press: { title: "Basın", body: "Basın materyalleri yakında eklenecektir." },
      career: { title: "Kariyer", body: "İş ilanlarımız yakında burada olacaktır." }
    };

    // ✅ Günlük sıfırlama sistemi - HER PLATFORM İÇİN AYRI
    function getTodayKey() {
      const d = new Date();
      return `${d.getFullYear()}-${d.getMonth() + 1}-${d.getDate()}`;
    }

    function initCredits() {
      const today = getTodayKey();
      const lastDate = localStorage.getItem("nsr_last_date");
      
      if (lastDate !== today) {
        // Yeni gün başladı, tüm platformları sıfırla
        const platforms = ['youtube', 'instagram', 'tiktok', 'x'];
        platforms.forEach(p => {
          localStorage.setItem(`nsr_credits_${p}`, "2");
        });
        localStorage.setItem("nsr_last_date", today);
      }
      
      // Her platform için ayrı hakları döndür
      return {
        youtube: parseInt(localStorage.getItem("nsr_credits_youtube") || "2", 10),
        instagram: parseInt(localStorage.getItem("nsr_credits_instagram") || "2", 10),
        tiktok: parseInt(localStorage.getItem("nsr_credits_tiktok") || "2", 10),
        x: parseInt(localStorage.getItem("nsr_credits_x") || "2", 10)
      };
    }

    const state = {
      lang: "tr",
      platform: "youtube",
      type: "üretim",
      credits: initCredits()
    };

    function setLang(l) {
      state.lang = l;
      document.querySelectorAll(".lang-btn").forEach(b => b.classList.remove("active"));
      const btn = document.getElementById("l-" + l);
      if (btn) btn.classList.add("active");
      document.getElementById("desc-text").innerText = FALLBACK_I18N[l] || FALLBACK_I18N.tr;
    }

    function openInfoModal(key) {
      document.getElementById("info-modal-title").innerText = INFO_CONTENT[key].title;
      document.getElementById("info-modal-body").innerHTML = INFO_CONTENT[key].body;
      document.getElementById("info-modal").classList.remove("hidden");
      document.getElementById("info-modal").classList.add("flex");
    }
    function closeInfoModal() { document.getElementById("info-modal").classList.add("hidden"); }

    function notify(msg) {
      const el = document.getElementById("notification");
      el.innerText = msg; el.style.display = "block";
      setTimeout(() => { el.style.display = "none"; }, 3500);
    }

    function showView(name) {
      closeAllDropdowns();
      const header = document.getElementById("page-header");
      document.getElementById("view-home").style.display = "none";
      document.getElementById("view-apps").style.display = "none";
      document.getElementById("view-platform").style.display = "none";
      if (name === "home") { document.getElementById("view-home").style.display = "block"; header.style.display = "block"; }
      else if (name === "apps") { document.getElementById("view-apps").style.display = "block"; header.style.display = "none"; }
      else if (name === "platform") { document.getElementById("view-platform").style.display = "block"; header.style.display = "none"; }
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    function setMode(p, t) {
      state.platform = p; state.type = t;
      document.getElementById("current-mode-title").innerText = `${p} ${t}`.toUpperCase();
      document.getElementById("input-label").innerText = t === "analiz" ? "Kanal Linki Giriniz" : "İçerik Konusu Giriniz";
      updateCreditsUI(); closeAllDropdowns();
    }

    function updateCreditsUI() { 
      const currentCredit = state.credits[state.platform] || 0;
      document.getElementById("credit-count").innerText = `HAK: ${currentCredit} / 2`; 
    }

    // Bonus geçici kapalı (UI zaten gizli)
    function openAdModal() { notify("Bonus sistem geçici olarak devre dışı."); }
    function closeAdModal() { document.getElementById("ad-modal").classList.add("hidden"); }
    function simulateAd() { notify("Bonus sistem geçici olarak devre dışı."); }

    async function generateDemo() {
      // Platform bazlı hak kontrolü
      const currentPlatform = state.platform;
      const currentCredit = state.credits[currentPlatform] || 0;
      
      if (currentCredit <= 0) { 
        notify(`${currentPlatform.toUpperCase()} için günlük üretim limitinize ulaştınız. Limitiniz yarın yenilenecektir.`);
        return; 
      }

      const val = (document.getElementById("topicInput").value || "").trim();
      if (!val) { 
        notify(state.type === "analiz" ? "Kanal linki giriniz." : "İçerik konusu giriniz."); 
        return; 
      }

      // Platform için hak düş
      state.credits[currentPlatform] -= 1;
      localStorage.setItem(`nsr_credits_${currentPlatform}`, String(state.credits[currentPlatform]));
      updateCreditsUI();

      const payload = state.type === "analiz"
        ? { mode: "analysis", url: val }
        : { mode: "produce", lang: state.lang, platform: state.platform, type: state.type, topic: val };

      try {
        const r = await fetch("/api/generate", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });

        const data = await r.json();
        const resultText = data?.text || data?.error || "Üretim gerçekleştirilemedi.";
        
        document.getElementById("result-text").innerText = resultText;
        document.getElementById("result-box").classList.remove("hidden");

        // Karakter kontrolü
        const totalChars = resultText.length;
        const validationEl = document.getElementById("validation-msg");
        
        if (totalChars > 100) {
          validationEl.innerText = `⚠️ Toplam ${totalChars} karakter. Platform limiti 100 karakterdir.`;
          validationEl.style.color = "#f43f5e";
        } else {
          validationEl.innerText = `✓ ${totalChars} / 100 karakter — Platform uyumlu.`;
          validationEl.style.color = "#10b981";
        }

      } catch (e) {
        document.getElementById("result-text").innerText = "Sunucu hatası oluştu.";
        document.getElementById("result-box").classList.remove("hidden");
        document.getElementById("validation-msg").innerText = "";
      }
    }

    function copyResult() { 
      navigator.clipboard.writeText(document.getElementById("result-text").innerText); 
      notify("İçerik panoya kopyalandı."); 
    }

    const dropdownMap = [
      { btn: "nav-apps-btn", dd: "nav-apps-dd" }, 
      { btn: "nav-platform-btn", dd: "nav-platform-dd" }, 
      { btn: "nav-production-btn", dd: "nav-production-dd" }
    ];
    
    function closeAllDropdowns() { 
      dropdownMap.forEach(x => { document.getElementById(x.dd).style.display = "none"; }); 
    }
    
    function toggleDropdown(ddId) { 
      const dd = document.getElementById(ddId); 
      const isOpen = dd.style.display === "block"; 
      closeAllDropdowns(); 
      if (!isOpen) dd.style.display = "block"; 
    }
    
    dropdownMap.forEach(x => { 
      document.getElementById(x.btn).addEventListener("click", (e) => { 
        e.stopPropagation(); 
        toggleDropdown(x.dd); 
      }); 
    });
    
    document.addEventListener("click", closeAllDropdowns);
    
    (function init() { 
      setLang("tr"); 
      updateCreditsUI(); 
    })();
  </script>
</body>
</html>
