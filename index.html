<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Test - Platform Hakları</title>
<style>
body{font-family:Arial;padding:40px;max-width:600px;margin:0 auto;}
.platform{background:#f0f0f0;padding:20px;margin:10px 0;border-radius:10px;}
button{background:#000;color:#fff;padding:10px 20px;border:none;border-radius:5px;cursor:pointer;margin:5px;}
button:hover{background:#333;}
.credit{font-size:24px;font-weight:bold;color:#f43f5e;}
</style>
</head>
<body>

<h1>Platform Hak Sistemi Test</h1>

<div class="platform">
  <h3>YouTube</h3>
  <div class="credit" id="yt-credit">Hak: 2/2</div>
  <button onclick="testPlatform('youtube')">YouTube Üretim Yap</button>
</div>

<div class="platform">
  <h3>Instagram</h3>
  <div class="credit" id="ig-credit">Hak: 2/2</div>
  <button onclick="testPlatform('instagram')">Instagram Üretim Yap</button>
</div>

<div class="platform">
  <h3>TikTok</h3>
  <div class="credit" id="tt-credit">Hak: 2/2</div>
  <button onclick="testPlatform('tiktok')">TikTok Üretim Yap</button>
</div>

<div class="platform">
  <h3>X (Twitter)</h3>
  <div class="credit" id="x-credit">Hak: 2/2</div>
  <button onclick="testPlatform('x')">X Üretim Yap</button>
</div>

<button onclick="resetAll()" style="background:#f43f5e;">Tüm Hakları Sıfırla</button>

<script>
function getTodayKey() {
  const d = new Date();
  return `${d.getFullYear()}-${d.getMonth() + 1}-${d.getDate()}`;
}

function initCredits() {
  const today = getTodayKey();
  const lastDate = localStorage.getItem("nsr_last_date");
  
  if (lastDate !== today) {
    const platforms = ['youtube', 'instagram', 'tiktok', 'x'];
    platforms.forEach(p => {
      localStorage.setItem(`nsr_credits_${p}`, "2");
    });
    localStorage.setItem("nsr_last_date", today);
  }
  
  return {
    youtube: parseInt(localStorage.getItem("nsr_credits_youtube") || "2", 10),
    instagram: parseInt(localStorage.getItem("nsr_credits_instagram") || "2", 10),
    tiktok: parseInt(localStorage.getItem("nsr_credits_tiktok") || "2", 10),
    x: parseInt(localStorage.getItem("nsr_credits_x") || "2", 10)
  };
}

let credits = initCredits();

function updateUI() {
  document.getElementById('yt-credit').innerText = `Hak: ${credits.youtube}/2`;
  document.getElementById('ig-credit').innerText = `Hak: ${credits.instagram}/2`;
  document.getElementById('tt-credit').innerText = `Hak: ${credits.tiktok}/2`;
  document.getElementById('x-credit').innerText = `Hak: ${credits.x}/2`;
}

function testPlatform(platform) {
  if (credits[platform] <= 0) {
    alert(`${platform.toUpperCase()} için günlük limit doldu! Yarın 2 hak yenilenecek.`);
    return;
  }
  
  credits[platform] -= 1;
  localStorage.setItem(`nsr_credits_${platform}`, String(credits[platform]));
  updateUI();
  alert(`${platform.toUpperCase()} üretim yapıldı! Kalan: ${credits[platform]}/2`);
}

function resetAll() {
  const platforms = ['youtube', 'instagram', 'tiktok', 'x'];
  platforms.forEach(p => {
    credits[p] = 2;
    localStorage.setItem(`nsr_credits_${p}`, "2");
  });
  updateUI();
  alert('Tüm haklar 2/2 olarak sıfırlandı!');
}

updateUI();
</script>

</body>
</html>
