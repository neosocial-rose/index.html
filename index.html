<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NeoSocial_Rose</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');
    body { font-family: 'Plus Jakarta Sans', sans-serif; background:#fff; color:#0f172a; overflow-x:hidden; }
    .glass-nav { background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); border-bottom: 1px solid #f1f5f9; }
    .nav-link { font-size: 11px; font-weight: 800; text-transform: uppercase; color:#64748b; cursor:pointer; transition:0.2s; display:flex; align-items:center; height:100%; user-select:none; }
    .nav-link:hover { color:#f43f5e; }
  </style>
</head>
<body class="min-h-screen flex flex-col">
  <nav class="fixed top-0 w-full z-50 glass-nav h-20">
    <div class="max-w-7xl mx-auto px-4 h-full flex items-center justify-between">
      <h1 class="text-xl font-black tracking-tighter cursor-pointer select-none" onclick="location.reload()">
        NEOSOCIAL<span class="text-rose-500">_ROSE</span>
      </h1>
      <div class="text-[10px] font-black uppercase text-slate-700">FLASH SÜRÜM</div>
    </div>
  </nav>

  <main class="flex-grow max-w-7xl mx-auto w-full px-4 pt-32 pb-14">
    <section id="generator" class="max-w-2xl mx-auto bg-white border border-slate-200 rounded-[3rem] p-10 shadow-2xl">
      <div class="flex items-center justify-between mb-10 border-b border-slate-50 pb-6">
        <h3 class="text-sm font-black uppercase text-slate-800 tracking-tighter">İÇERİK SİHİRBAZI</h3>
        <div class="text-[10px] font-black text-rose-500 bg-rose-50 px-4 py-1.5 rounded-full" id="credit-count">HAK: 2 / 2</div>
      </div>
      
      <div class="space-y-8">
        <input type="text" id="topicInput" class="w-full border-2 border-slate-100 p-5 rounded-2xl outline-none focus:border-rose-500 font-bold text-slate-900" placeholder="Konu yazın (Örn: Kahve çeşitleri)">
        <button onclick="generateDemo()" id="genBtn" class="w-full bg-slate-900 text-white py-5 rounded-2xl font-black uppercase tracking-[0.2em] hover:bg-rose-500 transition-all shadow-xl">ÜRETİMİ BAŞLAT</button>
        
        <div id="result-box" class="hidden mt-8">
          <div class="p-6 bg-slate-50 border-2 border-slate-100 rounded-2xl">
            <p id="result-text" class="text-base font-bold text-slate-800 font-mono break-words"></p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
    const state = { totalCredits: parseInt(localStorage.getItem("nsr_total_credits") || "2") };
    function updateCreditsUI() { document.getElementById("credit-count").innerText = `HAK: ${state.totalCredits} / 2`; }

    async function generateDemo() {
      if (state.totalCredits <= 0) { alert("Günlük hakkınız bitti."); return; }
      const inputVal = document.getElementById("topicInput").value.trim();
      if (!inputVal) return;

      const genBtn = document.getElementById("genBtn");
      genBtn.disabled = true;
      genBtn.innerText = "YAPAY ZEKA ÇALIŞIYOR...";

      const _k = "AIzaSyCxgBXFJER8LuHiYNosqD5Kho2wUjKItsg";

      try {
        // EN SPESİFİK MODEL İSMİ: gemini-1.5-flash-001
        // Bu isim doğrudan sürüm numaralıdır, alias hatası vermez.
        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-001:generateContent?key=${_k}`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ contents: [{ parts: [{ text: inputVal + " hakkında 100 karakterlik kısa viral bir sosyal medya başlığı yaz." }] }] })
        });

        const data = await response.json();

        if (data.error) {
          // Hata mesajını özelleştirdik
          alert("GOOGLE HATASI: " + data.error.message + "\n\nÇÖZÜM: Google Cloud Console'a git ve 'Generative Language API' servisini ETKİNLEŞTİR.");
        } else if (data.candidates && data.candidates[0]) {
          let aiRes = data.candidates[0].content.parts[0].text.trim().slice(0, 100);
          state.totalCredits -= 1;
          localStorage.setItem("nsr_total_credits", state.totalCredits);
          updateCreditsUI();
          document.getElementById("result-text").innerText = aiRes;
          document.getElementById("result-box").classList.remove("hidden");
        }
      } catch (e) { alert("İnternet bağlantı hatası!"); }
      finally { genBtn.disabled = false; genBtn.innerText = "ÜRETİMİ BAŞLAT"; }
    }
    updateCreditsUI();
  </script>
</body>
</html>
